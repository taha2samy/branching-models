<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left: 0.25em solid rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


/* Theme adapted from https://codemirror.net/theme/dracula.css */
/*
    Name:       dracula
    Author:     Michael Kaminsky (http://github.com/mkaminsky11)

    Original dracula color scheme by Zeno Rocha (https://github.com/zenorocha/dracula-theme)
*/

.cm-s-inner {
  padding: 0.5rem 0.2rem;
  border: 1px solid var(--accent-color) !important;
  border-radius: 0.25rem;
}

.cm-s-inner.CodeMirror, .cm-s-inner .CodeMirror-gutters {
  background-color: #282a36 !important;
  color: #f8f8f2 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  width: 5ch;
  color: #282a36;
}
.cm-s-inner .CodeMirror-cursor { border-left: solid thin #f8f8f2 !important; }
.cm-s-inner .CodeMirror-linenumber {
  width: 4ch !important;
  color: #6D8A88;
}

.cm-s-inner .CodeMirror-line::selection,
.cm-s-inner .CodeMirror-line > span::selection,
.cm-s-inner .CodeMirror-line > span > span::selection { background: rgba(255, 255, 255, 0.10); }
.cm-s-inner .CodeMirror-line::-moz-selection,
.cm-s-inner .CodeMirror-line > span::-moz-selection,
.cm-s-inner .CodeMirror-line > span > span::-moz-selection { background: rgba(255, 255, 255, 0.10); }
.cm-s-inner span.cm-comment { color: #6272a4; }
.cm-s-inner span.cm-string, .cm-s-inner span.cm-string-2 { color: #f1fa8c; }
.cm-s-inner span.cm-number { color: #bd93f9; }
.cm-s-inner span.cm-variable, .cm-s-inner span.cm-variable-2 { color: #50fa7b; }
.cm-s-inner span.cm-def { color: white; }
.cm-s-inner span.cm-operator { color: #ff79c6; }
.cm-s-inner span.cm-keyword { color: #ff79c6; }
.cm-s-inner span.cm-atom { color: #bd93f9; }
.cm-s-inner span.cm-meta { color: #f8f8f2; }
.cm-s-inner span.cm-tag { color: #ff79c6; }
.cm-s-inner span.cm-attribute { color: #50fa7b; }
.cm-s-inner span.cm-qualifier { color: #50fa7b; }
.cm-s-inner span.cm-property { color: #66d9ef; }
.cm-s-inner span.cm-builtin { color: #50fa7b; }
.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type { color: #ffb86c; }

.cm-s-inner .CodeMirror-activeline-background { background: rgba(255,255,255,0.1); }
.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: white !important;
}
.CodeMirror-selectedtext, .CodeMirror-selected {
  background: #313746 !important;
  text-shadow: none;
}
/* 
  Middle East - Night
  Typora RTL theme
  design: isapanah.com
  date: 2019
  version: 1.1
*/

@import url("file:////home/Taha/.config/Typora/themes/");

/*
  Vazir provided by Rastikerdar
  Downloaded from `https://github.com/rastikerdar/vazir-font`
*/
/*
	Cousine provided by Steve Matteson from Google Fonts
	Downloaded from `https://fonts.google.com/specimen/Cousine`
*/
/** ROOT VARIABLES **/

:root {
  --bg-color: #1e2022; /* change background */
  --text-color: #dddddd; /* change text color */
  --md-char-color: #5b5b5b; /* change color of mbeta characetrs like `*` in markdown */
  --meta-content-color: #757575; /* change color of meta contents like image text or link address in markdown */
  --link-color: #6bcafb; /* change color of hyperlinks */

  --primary-color: #428bca; /* primary color */
  --primary-btn-border-color: #285e8e; /* primary color for buttons */
  --primary-btn-text-color: #fff; /* primary text color for buttons */
  --accent-color: #3c3c3c; /* background accent color */

  --window-border: 1px solid #16161a; /* border for sidebar, etc*/

  --active-file-bg-color: #16161a; /* background color if list item in file tree or file list*/
  --active-file-text-color: inherit; /* text color for selected file */
  --active-file-border-color: #777; /* border color for selected file */
  --active-search-item-bg-color: #212121; /* background color for active search item */

  --side-bar-bg-color: #2b2b2b; /* change background of sidebar*/
  --item-hover-bg-color: var(--bg-color); /* background of control items when hover, like menu in sidebar*/
  --item-hover-text-color: white; /* text color upon hovering over menu items */
  --search-hit-bg-color: #428bca40;
  --search-select-text-color: var(--text-color); /* Text color for selected searched text */
  --search-select-bg-color: #428bca90; /* Background color for selected searched text */
  --rawblock-edit-panel-bd: var(--accent-color); /* Background color for inline HTML "edit panel" blocks */
  --monospace: "Cousine"; /* monospace font for codes, fences */

  --megamenu-bg-color: var(--side-bar-bg-color); /* background color for unibody megamenu */
  --megamenu-sidebar-bg-color: var(--bg-color); /* background color for megamenu sidebar */
  --megamenu-sidebar-hover-bg-color: #161819; /* background color for hovering megamenu sidebar items */
  --megamenu-sidebar-active-bg-color: #101010; /* background color for active megamenu sidebar items */
  --megamenu-button-border-color: #9292928f; /* background color for megamenu buttons */
  --megamenu-item-hover-bg-color: var(--bg-color); /* background color for hovering megamenu items */
  --megamenu-item-hover-text-color: white; /* text color for hovering megamenu items */
}

/** TAGS **/

html,
body {
  font-family: "Vazir", "Lato", sans-serif;
}

body {
  font-size: 14px;
}

h1,
h2,
h3,
h4,
h5,
h6, p, a, del, mark, #write p, #write a, #write del, #write mark, #write ul, #write li, #write ol,
#write table, #write tr, #write td, table, tr, td {
  direction: rtl;
}

.outline-item{
  direction: rtl;
}
.outline-h2, .outline-h3, .outline-h4,
 .outline-h5, .outline-h6 {
  margin-right: 10px !important;
}

#md-notification, #md-notification *{
  direction: ltr;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Vazir-Bold";
}

h1 {
  font-size: 1.8rem;
  margin: 1rem 0;
}

h2 {
  font-size: 1.4rem;
  margin: 0.7rem 0;
}

h3 {
  font-size: 1.2rem;
  margin: 0.5rem 0;
}

h4 {
  font-size: 1.1rem;
  margin: 0.2rem 0;
}

h5 {
  font-size: 1rem;
  margin: 0;
}

h6 {
  font-size: 1rem;
  margin: 0;
}

p {
  margin: 0.5rem 0;
}

a {
  color: var(--link-color);
}

del {
  color: var(--md-char-color);
}

mark {
  padding: 2px 1px;
  background: #fee405;
}

/* Writing area -> line height */
#write {
	line-height: 1.6;
}

/* Custom list-style */
#write ol,
#write ul {
  padding-left: 2rem;
  margin: 0.5rem 0;
  margin-left: 0 !important;
  padding-left: 0 !important;
}

#write ul {
  list-style-type: disc;
}

#write ol > li,
#write ul > li {
  color: var(--primary-color);
  padding-left: 0.25em;
}

#write ol li > *,
#write ul li > * {
  color: var(--text-color);
}

#write .md-task-list-item {
  transition: all 0.3s;
}

#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid var(--md-char-color);
  border-radius: 0.25rem;
  margin-top: 0.1rem;
  margin-right: -1.8rem;
  height: 1.2rem;
  width: 1.2rem;
  transition: background 0.4s;
  right: 0;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: var(--accent-color);
}

#write .md-task-list-item.task-list-done > p {
  color: var(--md-char-color);
  text-decoration: line-through;
}

#write .md-task-list-item > input[checked]::before {
  content: "";
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: var(--text-color);
}

#write .md-task-list-item > input[checked]::after {
  content: "";
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: var(--text-color);
}

blockquote {
  margin: 1rem 0rem 1rem 0;
  font-family: "Vazir-Bold";
}

blockquote p::before {
  content: "";
  position: absolute;
  right: -2rem;
  height: 100%;
  width: 0.25rem;
  background: var(--primary-color);
}

blockquote p:not(:last-child):before {
  height: calc(100% + 1rem);
}

code,
.md-fences,
tt {
  font-family: "Cousine", monospace;
  font-size: 1rem;
}

code {
  border: 1px solid var(--accent-color);
  border-radius: 0.25rem;
  padding: 0 0.125rem;
}

/* Code auto-suggest list menu */
#fences-auto-suggest .active {
  background: var(--accent-color);
}

hr {
  border-color: var(--md-char-color);
}

/* YAML */
pre.md-meta-block {
  background-color: transparent;
  border-bottom: 1px solid var(--md-char-color);
  padding-bottom: 1rem;
  opacity: 0.8;
}

/* Tables */
table {
  border: 1px solid var(--md-char-color);
  margin: 1rem 0;
}

thead {
  background: #4d4d4d;
}

table tr:nth-child(2n) {
  background: var(--accent-color);
}

td,
th {
  padding: 0.35rem 0.7rem;
  border: 1px solid var(--md-char-color);
}

/* Table toolbar */
.md-table-edit {
  border-top: 1px solid var(--meta-content-color);
  margin-top: -29px !important;
  padding: 3px 0;
}

/* Table drag areas */
.typora-table-drag-area::after {
  content: "";
  position: absolute;
  border: 2px solid var(--text-color);
  opacity: 0;
  transition: opacity 0.4s;
}

#typora-table-row-tracker .typora-table-drag-area::after {
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 100%;
}

#typora-table-col-tracker .typora-table-drag-area::after {
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  width: 100%;
  height: 0;
}

#typora-table-row-tracker .typora-table-drag-area:hover::after,
#typora-table-col-tracker .typora-table-drag-area:hover::after {
  opacity: 1;
}

/* Table of contents */
.md-toc-tooltip {
  z-index: 10;
}

span.md-toc-item {
  font-size: 1.1rem;
  color: var(--primary-btn-border-color);
}

span.md-toc-h1 {
  font-family: "Vazir-Bold";
  font-size: 1.3rem;
}

span.md-toc-h2 {
  font-size: 1.2rem;
}

/* Footnote */
sup.md-footnote {
  font-family: "Vazir-Bold";
  font-size: 0.8rem;
  padding: 0 4px;
}

span.md-def-split {
  min-width: 1ch;
}

.md-def-name::before,
.md-def-name::after {
  color: var(--meta-content-color);
}

/* Writing area */
#write {
  width: 90%;
  max-width: 700px;
}

/* Fill whole width of container */
#write h1,
#write h2,
#write h3,
#write h4,
#write h5,
#write h6,
#write p,
#write pre {
  width: auto;
}

/* Header prefix symbol */
/* Disable default header symbol */
#write h3.md-focus::before,
#write h4.md-focus::before,
#write h5.md-focus::before,
#write h6.md-focus::before {
  border: none;
  border-radius: 0;
  left: auto;
  float: none;
  padding: 0;
  vertical-align: baseline;
  line-height: 20px;
}

#write h1::before,
#write h2::before,
#write h3::before,
#write h4::before,
#write h5::before,
#write h6::before {
  position: absolute;
  top: 0;
  right: calc(100% + 10px);
  color: var(--md-char-color);
  font-size: 1rem;
  font-weight: bold;
  font-variant: "small-caps";
}

#write h1::before {
  content: "H1";
  top: 0.7rem;
}

#write h2::before {
  content: "H2";
  top: 0.37rem;
}

#write h3::before {
  content: "H3";
  top: 0.15rem;
}

#write h4::before {
  content: "H4";
}

#write h5::before {
  content: "H5";
}

#write h6::before {
  content: "H6";
}

/* Image meta text */
#write .md-image > .md-meta {
  color: var(--meta-content-color);
}

/* Inline styles */
.md-rawblock-tooltip {
  top: -1.5rem;
  height: 1.5rem;
  padding: 0.25rem;
}

/* Search results */
.md-search-hit {
  background: var(--search-hit-bg-color);
  border-radius: 0.125em;
}

.md-search-select {
  background: var(--search-select-bg-color);
  border: 1px solid var(--megamenu-button-border-color);
  padding: 0 1px;
}

/* Focus mode */
.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) *,
.on-focus-mode pre.md-end-block:not(.md-focus):not(.md-focus-container) {
  color: var(--md-char-color) !important;
}

.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) img,
.on-focus-mode
  blockquote
  .md-end-block:not(.md-focus):not(.md-focus-container)::before,
.on-focus-mode li:not(.md-focus-container)::before {
  opacity: 0.5;
}

.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) mark {
  background: var(--accent-color);
}

/* UI Sidebar */
#typora-sidebar {
  border-right: 1px solid #19191c;
}

.sidebar-tabs {
  font-family: "Vazir-Bold";
  border-bottom: 1px solid black;
}

.file-list-item-file-name {
  font-family: "Vazir-Bold";
  font-size: 1.2rem;
}

input.file-list-item-file-name, input.file-tree-rename-input {
  background: var(--side-bar-bg-color);
}

#file-library-search .file-list-item-file-name {
  font-size: 1.1rem;
}

#file-library-search .ty-search-item.active {
  background: var(--active-search-item-bg-color);
}

#file-library-search-input {
  background: var(--side-bar-bg-color);
}

.file-list-item-summary,
.ty-search-item-line {
  font-family: "Vazir", "Lato", sans-serif;
}

.ty-file-search-match-text,
.ty-outline-hit {
  font-weight: bold;
  background: transparent;
}

#outline-content {
  line-height: 1.4em;
}

#outline-content .outline-h1 > .outline-item {
  font-family: "Vazir-Bold";
}

.file-library-node,
.file-library-node .file-node-background {
  transition: background 0.4s;
}

.file-tree-node.file-library-file-node:not(.active):hover .file-node-background,
.file-list-item.file-library-node:not(.active):hover {
  background: var(--item-hover-bg-color);
}

.file-tree-node.file-library-file-node.active .file-node-background,
.file-list-item.file-library-file-node.active {
  border-left: 5px solid var(--primary-color);
}

/* Remove blinking animation when updating filename */
.blink-area {
  animation: none;
}

#ty-sidebar-footer {
  border-top: 1px solid black;
}

.sidebar-footer-item {
  transition: background 0.3s;
}

.outline-title-wrapper,
.outline-item-wrapper.outline-h1 > .outline-item {
  font-family: "Vazir-Bold";
  font-weight: bold;
}

/* Windows-specific */
/* Context and dropdown menus */
ul.dropdown-menu li.active a,
ul.dropdown-menu li.has-extra-menu.active a,
ul.dropdown-menu li.has-btn-submenu a.menu-style-btn.active,
#footer-word-count-info .ty-footer-word-count-all tr:hover,
#ty-spell-check-dict-missing-menu li:hover,
.ty-spell-check-panel-item.ty-active,
.ty-spell-check-panel-item:hover {
  background: var(--text-color) !important;
  color: var(--bg-color) !important;
}

/* Windows Unibody */
footer.ty-footer {
  border-top: 0;
}

.footer-item:hover {
  background: var(--text-color) !important;
  color: var(--bg-color) !important;
}

.form-control:focus {
  border-color: var(--primary-color);
  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 2px var(--primary-color);
}

/* Windows Unibody megamenu */
.megamenu-opened header {
  background-image: none;
}

#top-titlebar, #top-titlebar * {
  color: inherit;
}

#megamenu-content {
  padding-top: 28px;
  background: var(--megamenu-bg-color);
  color: var(--text-color);
}

.megamenu-menu-panel:not(:first-of-type) {
  margin-top: 48px;
}

#megamenu-content .long-btn {
  border-color: var(--megamenu-button-border-color);
  transition: all 0.4s;
}

#megamenu-content .long-btn:hover {
  border-color: var(--primary-color);
  background: var(--megamenu-item-hover-bg-color);
  color: var(--megamenu-item-hover-text-color) !important;
}

#recent-file-panel-action-btn {
  background: inherit;
  border-color: var(--megamenu-button-border-color);
  transition: all 0.4s;
}

#recent-file-panel-action-btn:hover {
  border-color: var(--primary-color);
  background: var(--megamenu-item-hover-bg-color);
  color: var(--megamenu-item-hover-text-color);
}

#recent-document-table {
  border: 1px solid var(--accent-color);
}

#recent-file-panel tbody tr:nth-child(2n-1) {
  background-color: inherit;
}

#recent-file-panel tbody tr:hover {
  background-color: var(--megamenu-item-hover-bg-color) !important;
}

#recent-file-panel tbody tr:hover td:nth-child(1) {
  color: var(--megamenu-item-hover-text-color);
}

/* Windows Unibody sidebar */
#megamenu-menu-sidebar {
  background: var(--megamenu-sidebar-bg-color);
  color: var(--text-color);
}

.megamenu-menu-header, .megamenu-menu-list li:not(.saved) a {
  transition: all 0.4s;
}

.megamenu-menu-header {
  border-bottom: var(--window-border);
}

.megamenu-menu-header:hover, .megamenu-menu-list li:not(.saved) a:not(.active):hover {
  background: var(--megamenu-sidebar-hover-bg-color);
}

.megamenu-menu-list li a.active {
  background: var(--megamenu-sidebar-active-bg-color) !important;
}

#m-saved {
  background: inherit;
  color: inherit;
}

#megamenu-menu-list {
  margin: 0;
}

.theme-preview-div {
  transition: all 0.4s;
}

.theme-preview-div:hover {
  border: 4px solid var(--primary-btn-border-color);
}

.theme-preview-div.active, .theme-preview-div.active:hover {
  border: 4px solid var(--primary-color);
}

.theme-preview-div.active i {
  color: var(--primary-color);
}

/* Source Code */
.cm-s-typora-default .cm-s-inner.CodeMirror-line {
  border: 0 !important;
}

/* Print/PDF */
@media print {
  #write ol > li,
  #write ul > li {
    color: var(--text-color);
  }
  #write h1::before, #write h2::before, #write h3::before,
  #write h4::before, #write h5::before, #write h6::before {
    display: none;
  }
}




</style><title>ch1</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet">

<style>
    /* تطبيق الخط على كل الصفحة */
    body {
        font-family: "Vazirmatn", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
    }
    </style>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><p>&nbsp;</p><h3 id='يلا-بينا-نبدأ-مع-keycloak'><strong><span>يلا بينا نبدأ مع Keycloak</span></strong></h3><p><span>لو إنت لسه جديد على </span><code>Keycloak</code><span>، الشابتر ده هيدخلك في الموضوع على طول. هنبدأ بمقدمة سريعة عن </span><code>Keycloak</code><span> هو إيه. بعدها، هتشوف بنفسك قد إيه سهل إنك تسطبه (تعمله </span><code>install</code><span>) وتشغله. بعد ما نشغل </span><code>Keycloak</code><span>، هنتعرف على الـ </span><code>admin console</code><span> بتاعته، ودي gui interface ممتازة عشان تدير وتظبط إعدادات </span><code>Keycloak</code><span>. وفي الآخر، هنبص بصة سريعة على الـ </span><code>account console</code><span>، ودي اللي بتخلي المستخدمين بتوع تطبيقاتك يديروا حساباتهم بنفسهم.</span></p><p><span>لما نخلص الشابتر ده، هتكون عرفت إزاي تبدأ شغل على </span><code>Keycloak server</code><span>، وهتفهم إزاي تستخدم الـ </span><code>admin console</code><span> عشان تدير </span><code>Keycloak</code><span>. وهتتعلم إزاي تجهز </span><code>Keycloak</code><span> بيوزر كمثال عشان نبدأ نأمّن أول تطبيق ليك في الشابتر اللي جاي.</span></p><p><strong><span>في الشابتر ده، هنتكلم عن المواضيع دي:</span></strong></p><ul><li><p><span>مقدمة عن </span><code>Keycloak</code><span>.</span></p></li><li><p><span>تسطيب وتشغيل </span><code>Keycloak</code><span>.</span></p></li><li><p><span>استكشاف الـ </span><code>admin console</code><span> والـ </span><code>account console</code><span> بتوع </span><code>Keycloak</code><span>.</span></p></li></ul><h3 id='technical-requirements'><code>technical requirements</code></h3><p><span>عشان تشغل </span><code>Keycloak</code><span> في الشابتر ده، هتحتاج يكون متسطب عندك </span><code>Docker</code><span> أو </span><code>JDK 17+</code><span>.</span></p><hr /><h3 id='مقدمة-عن-keycloak'><strong><span>مقدمة عن Keycloak</span></strong></h3><p><code>Keycloak</code><span> هو أداة </span><code>open source</code><span> لي(</span><code>Identity and Access Management</code><span>)، وبيركز بشكل أساسي على التطبيقات الحديثة زي الـ </span><code>single-page applications</code><span>، وتطبيقات الموبايل، والـ </span><code>REST APIs</code><span>.</span></p><p><span>المشروع بدأ سنة 2014 وكان تركيزه الأساسي إنه يسهّل على المطورين تأمين تطبيقاتهم. ومن وقتها، المشروع كبر وبقى ليه مجتمع قوي وقاعدة مستخدمين كبيرة. بيتم استخدامه في سيناريوهات حقيقية على أرض الواقع، بداية من المواقع الصغيرة اللي فيها عدد قليل من المستخدمين، ولحد الشركات الضخمة اللي عندها ملايين المستخدمين.</span></p><p><code>Keycloak</code><span> بيديك صفحات </span><code>login</code><span> تقدر customize ليه بالكامل، وبيدعم وسائل الـ </span><code>authentication</code><span> القوية، وفيه إمكانيات جاهزة زي استعادة الباسورد، وإجبار المستخدمين على تحديث باسورداتهم بشكل دوري، وزاي تجبره يقراء  الشروط والأحكام، وحاجات تانية كتير. كل ده من غير ما تحتاج تضيف أي حاجة في تطبيقاتك، أو تكتب أي كود خالص. كل الصفحات اللي بتظهر للمستخدمين بتدعم انك تعمل customize ليه بـ(html ,css ,......)، وده بيخلي تغيير شكلها سهل جداً عشان تتماشى مع هوية شركتك وتطبيقاتك الحالية.</span></p><p><span>لما بترمي مسئولية الـ </span><code>authentication</code><span> على </span><code>Keycloak</code><span>، تطبيقاتك مش بتحتاج تقلق بخصوص طرق الـ </span><code>authentication</code><span> المختلفة، أو إزاي تخزن الباسوردات بشكل آمن. الطريقة دي كمان بتدي مستوى أمان أعلى، لإن التطبيقات مش بتوصل مباشرة لبيانات دخول اليوزر (</span><code>user credentials</code><span>)؛ بدل كده، بتاخد </span><code>security tokens</code><span> بتديلها صلاحية توصل للحاجات اللي محتاجاها</span></p><div class="md-alert md-alert-tip tip"><p><span class='md-alert-text md-alert-text-tip'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</span><br></p><p><span>لما نقول إن تطبيقاتك &quot;ملهاش وصول&quot;، فالمقصود بشكل  مباشر إن سيرفر الأبلكيشن بتاعك لا يستقبل أو يتعامل مع الـ password الخاص باليوزر. العملية كلها بتتم بعيد عنه. لما اليوزر بيحتاج يعمل login، الأبلكيشن بتاعك بيعمله redirect لصفحة الـ login اللي  على سيرفر Keycloak. اليوزر بيدخل الـ credentials بتاعته هناك، وبالتالي الـ POST request اللي بيحتوي على الـ password بيروح مباشرة لسيرفر Keycloak، مش لسيرفر تطبيقك.</span></p><p><span>بعد ما Keycloak يتأكد إن الـ password سليم، هو مش بيرجّع الباسورد لتطبيقك، لأ، هو بيعمل generate لـ security token. التوكن ده عبارة عن (jwt فى الغالب) بيقول إن اليوزر ده تمام وعمل authenticate بنجاح. بعدها Keycloak بيرجّع اليوزر تاني لتطبيقك ومعاه الـ token ده. تطبيقك بياخد التوكن، وبيتأكد من الـ signature بتاعته عشان يضمن إنه موثوق ومحدش تلاعب فيه، وبناءً على المعلومات اللي جوه التوكن زي الـ user ID والـ roles، بيمنحه صلاحية الدخول. وبالطريقة دي، الأبلكيشن بتاعك بيعتمد على الثقة في التوكن اللي جايله من Keycloak من غير ما يضطر يشوف أو يخزن أي password، وده بيرفع مستوى الأمان بشكل ضخم.</span></p></div><p><span>ولما بنتكلم عن الـ </span><code>authentication</code><span>، فـ </span><code>Keycloak</code><span> بيدعم أنواع كتير من factors الـ </span><code>authentication</code><span>، وده بيخليك تقدر تفعل بسهولة الـ </span><code>Multi-Factor Authentication (MFA)</code><span> </span>
<span>والـ </span><code>Strong Authentication (SA)</code><span> لتطبيقاتك. وزي ما هتشوف في شابتر 11، بخطوات قليلة جداً هتقدر تختار إن المستخدمين يعملوا </span><code>authentication</code><span> عن طريق </span><code>OTPs</code><span> ، أو أجهزة الأمان والـ </span><code>WebAuthn</code><span>، أو الباسوردات، أو أي خليط من كل ده.</span></p><p><code>Keycloak</code><span> بيديك </span><code>single sign-on</code><span> (تسجيل دخول مرة واحدة) وكمان إمكانيات </span>
<span> (</span><code>session management</code><span>)، وده بيسمح للمستخدمين يدخلوا على كذا تطبيق وهما محتاجين يعملوا </span><code>authentication</code><span> مرة واحدة بس. المستخدمين نفسهم والـ </span><code>administrators</code><span> عندهم رؤية كاملة لكل الأماكن اللي المستخدمين عاملين </span><code>login</code><span> فيها، ويقدروا يقفلوا أي </span><code>session</code><span> عن بعد لو احتاجوا.</span></p><p><code>Keycloak</code><span> مبني على بروتوكولات standerd زي </span><code>OAuth 2.0</code><span>، و </span><code>OpenID Connect</code><span>، و </span><code>SAML 2.0</code><span>. استخدام بروتوكولات standerd زي دي مهم من ناحية الأمان، وكمان بيسهل التكامل مع التطبيقات الحالية والجديدة.</span></p><p><code>Keycloak</code><span> بييجي معاه قاعدة بيانات للمستخدمين بتاعته، وده بيخلي البداية سهلة جداً. وممكن كمان تدمجه بسهولة مع </span><strong><span>Identity Management Systems</span></strong><span> اللي عندك. من خلال قدرات الـ </span><code>identity brokering</code><span>، تقدر توصل قواعد المستخدمين الموجودة عندك من social website (زي فيسبوك وجوجل) أو أي </span><code>enterprise identity providers</code><span> تانية. وكمان يقدر يتكامل مع  </span><code>Active Directory</code><span> و </span><code>LDAP servers</code><span>.</span></p><p><code>Keycloak</code><span> هو حل خفيف وسهل تسطبه. هو كمان </span><code>highly scalable</code><span>  وبيدعم الـ </span><code>high availability</code><span> ) من خلال إمكانيات الـ </span><code>clustering</code><span>.</span></p><p><span>Keycloak اتعمل من الأساس عشان يكون جاهز للاستخدام out-of-the-box لأغلب السيناريوهات الشائعة، لكن قوته الحقيقية إنه highly customizable و extendable. التصميم بتاعه فيه نقط محددة اسمها extension points، ودي عبارة عن &quot;أماكن&quot; تقدر تدخل منها بالـ custom code بتاعك عشان تغير في طريقة عمل Keycloak الأساسية أو تضيف عليه إمكانيات جديدة بالكامل.</span></p><p><span>كمثال، عن طريق الـ extension points دي تقدر تعمل: custom authentication methods خاصة بشركتك، أو تعمل integration مع user databases قديمة موجودة عندك بالفعل، أو تعمل customization للـ tokens عشان تضيف أو تشيل منها معلومات معينة. الموضوع flexible لدرجة إنك لو احتجت، تقدر تبني login protocols كاملة خاصة بيك وتضيفها على النظام. باختصار، هو بيديلك أساس قوي، وفي نفس الوقت بيسيبلك المساحة تعمل أي custom logic تحتاجه.</span></p><p><span>الجزء ده كان مقدمة سريعة جداً لمميزات وإمكانيات </span><code>Keycloak</code><span>. وبما إن هدف الكتاب ده إنه يديك دليل عملي لـ </span><code>Keycloak</code><span>، إحنا هنرجع لمعظم المميزات دي في شباتر جاية، وهناك هتتعلم بنفسك إزاي تستخدمها.</span></p><h3 id='تسطيب-وتشغيل-keycloak'><strong><span>تسطيب وتشغيل Keycloak</span></strong></h3><p><span>في الجزء ده، هتتعلم بسرعة إزاي تسطب وتشغل </span><code>Keycloak</code><span>. وبمجرد ما </span><code>Keycloak</code><span> يشتغل، هنبص على الـ </span><code>admin console</code><span> والـ </span><code>account console</code><span>.</span></p><p><code>Keycloak</code><span> بيوفر كذا طريقة للتسطيب، منها:</span></p><ul><li><p><span>تشغيله كـ </span><code>container</code><span> على </span><code>Docker</code><span>.</span></p></li><li><p><span>تسطيبه وتشغيله على جهازك مباشرة (وده هيحتاج </span><code>Java virtual machine</code><span> زي </span><code>OpenJDK</code><span>).</span></p></li><li><p><span>تشغيله على </span><code>Kubernetes</code><span>.</span></p></li><li><p><span>استخدام </span><code>Keycloak Kubernetes Operator</code><span>.</span></p></li></ul><p><span>لو عندك </span><code>Docker</code><span> متسطب على جهازك، فدي هي الطريقة اللي بننصح بيها لأنها أسهل وأسرع طريقة تشغله بيها.</span>
<span>لو معندكش </span><code>Docker</code><span>، يبقى الأسهل إنك تبدأ بتسطيبه وتشغيله على جهازك مباشرة. الحاجة الوحيدة اللي هتحتاجها هي </span><code>Java virtual machine</code><span>.</span></p><p><code>Keycloak</code><span> كمان ممكن يتنشر بسهولة على </span><code>Kubernetes</code><span>، وهناك عندك اختيار إنك تستخدم </span><code>Keycloak Kubernetes Operator</code><span>، وده بيخلي التسطيب والإعدادات والإدارة أسهل كمان. إحنا مش هنشرح خطوات </span><code>Kubernetes</code><span> في الكتاب ده، عشان عايزين نركز أكتر على </span><code>Keycloak</code><span> نفسه ومميزاته.</span></p><h3 id='تشغيل-keycloak-على-docker'><strong><span>تشغيل Keycloak على Docker</span></strong></h3><p><span>مع </span><code>Docker</code><span>، تشغيل </span><code>Keycloak</code><span> سهل جداً لإنك مش محتاج تسطب </span><code>Java virtual machine</code><span> بنفسك، ولا محتاج تنزل وتفك ملفات </span><code>Keycloak</code><span>.</span></p><p><span>عشان تشغل </span><code>Keycloak</code><span> على </span><code>Docker</code><span>، ببساطة نفذ الأمر التالي:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 16.6328px; left: 7.6302px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ docker</span> run <span class="cm-attribute">-e</span> <span class="cm-def">KEYCLOAK_ADMIN</span><span class="cm-operator">=</span>admin <span class="cm-attribute">-e</span> <span class="cm-def">KEYCLOAK_ADMIN_PASSWORD</span><span class="cm-operator">=</span>admin <span class="cm-attribute">-p</span> <span class="cm-number">8080</span>:8080 quay.io/keycloak/keycloak:22.0.0 start-dev</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>بما إن </span><code>Keycloak</code><span> مش بييجي معاه حساب </span><code>admin</code><span> افتراضي، فالجزء بتاع </span><code>KEYCLOAK_ADMIN</code><span> و </span><code>KEYCLOAK_ADMIN_PASSWORD</code><span> في الأمر ده بيسهل عليك إنك تعمل حساب </span><code>admin</code><span> مبدئي.</span>
<span>إحنا كمان بنستخدم </span><code>–p 8080:8080</code><span> عشان نفتح الـ </span><code>port</code><span> اللي بيستخدمه </span><code>Keycloak</code><span> على جهازنا، عشان نقدر نوصله بسهولة.</span></p><p><span>بعد كام ثانية، تقدر تتأكد إن </span><code>Keycloak</code><span> اشتغل بإنك تفتح اللينك ده </span><strong><a href='http://localhost:8080/admin' target='_blank' class='url'>http://localhost:8080/admin</a></strong><span> وتعمل </span><code>login</code><span> باليوزرنيم </span><strong><span>admin</span></strong><span> والباسورد </span><strong><span>admin</span></strong><span>.</span></p><p><img src="imgs/image-20250628143234109.png" referrerpolicy="no-referrer" alt="image-20250628143234109"></p><p>&nbsp;</p><p><span>ألف مبروك! كده </span><code>Keycloak</code><span> قام عندك واشتغل كـ </span><code>Docker container</code><span>، ودلوقتي نقدر نبدأ نكتشف الـ </span><code>admin console</code><span> والـ </span><code>account console</code><span> عشان نشوف الدنيا فيها إيه.</span></p><h3 id='الطريقة-التانية-تسطيب-وتشغيل-keycloak-باستخدام-openjdk'><strong><span>الطريقة التانية: تسطيب وتشغيل </span><code>Keycloak</code><span> باستخدام </span><code>OpenJDK</code></strong></h3><p><span>بما إن </span><code>Keycloak</code><span> معمول بلغة </span><code>Java</code><span>، فسهل أوي تشغله على أي نظام تشغيل من غير ما تحتاج تسطب أي حاجة زيادة. كل اللي هتحتاجه هو </span><code>Java virtual machine</code><span>، زي </span><code>OpenJDK</code><span>.</span></p><p><span>في الجزء الجاي ده، هنسطب </span><code>OpenJDK</code><span>، وده ضروري قبل ما نشغل </span><code>Keycloak</code><span>. </span><strong><span>لو إنت أصلاً عندك </span><code>Java</code><span> متسطبة على جهازك، ممكن تفوت الجزء ده وتخش على طول على جزء &quot;تسطيب </span><code>Keycloak</code><span>&quot;.</span></strong></p><h4 id='تسطيب-openjdk'><strong><span>تسطيب </span><code>OpenJDK</code></strong></h4><p><span>عشان تسطب </span><code>Keycloak</code><span>، لازم يكون عندك </span><code>Java</code><span> إصدار 17 (</span><code>JRE</code><span>).</span>
<span>هتروح على اللينك ده: </span><code>adoptium.net/temurin/archive</code><span>، ومن هناك نزل </span><code>OpenJDK</code><span> إصدار 17 المناسب لنظام التشغيل بتاعك. بعد ما ينزل، فك ضغطه في مكان مناسب، وبعدين ظبط </span><code>environment variable</code><span>اللي اسمه </span><code>JAVA_HOME</code><span> عشان يشاور على مكان الفولدر اللي فكيت فيه الضغط.</span></p><p><span>دي مثال بالأوامر على نظام </span><code>Linux</code><span>:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 17.0234px; left: 7.6302px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ mkdir</span> ~/kc-book</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ cd</span> ~/kc-book</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ tar</span> xfvz ~/Downloads/OpenJDK17U-jdk_x64_linux_hotspot_17.0.6_10.tar.gz</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ export</span> <span class="cm-def">JAVA_HOME</span><span class="cm-operator">=</span>~/kc-book/jdk-17.0.6<span class="cm-operator">+</span><span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ $JAVA_HOME</span>/bin/java <span class="cm-attribute">-version</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div><div class="CodeMirror-gutters" style="display: none; height: 112px;"></div></div></div></pre><p><span>الأمر الأخيرjava -version مجرد بيتأكد إن </span><code>Java</code><span> اشتغلت تمام.</span></p><p><span>دلوقتي بعد ما </span><code>OpenJDK</code><span> اتسطب، يلا بينا نخش على تسطيب </span><code>Keycloak</code><span> نفسه.</span></p><h4 id='تسطيب-keycloak'><strong><span>تسطيب </span><code>Keycloak</code></strong></h4><p><span>بمجرد ما </span><code>Java</code><span> تكون متسطبة على جهازك، الخطوة الجاية هي إنك تنزل توزيعة </span><code>Keycloak</code><span> من موقعه الرسمي. افتح اللينك ده </span><strong><a href='https://www.keycloak.org/downloads' target='_blank' class='url'>https://www.keycloak.org/downloads</a></strong><span> ونزل ملف السيرفر (سواء </span><code>ZIP</code><span> أو </span><code>TAR.GZ</code><span>). بعد ما ينزل، فك ضغطه في مكان مناسب.</span></p><p><span>ده مثال بالأوامر على </span><code>Linux</code><span>:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 17.0234px; left: 7.6302px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ unzip</span> ~/Downloads/keycloak-22.0.0.zip</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ export</span> <span class="cm-def">KC_HOME</span><span class="cm-operator">=</span>~/kc-book/keycloak-22.0.0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 45px;"></div></div></div></pre><p><span>إنت دلوقتي جاهز تشغل </span><code>Keycloak</code><span>، وده اللي هنعمله دلوقتي.</span></p><h4 id='تشغيل-keycloak'><strong><span>تشغيل </span><code>Keycloak</code></strong></h4><p><span>بعد ما سطبت </span><code>Keycloak</code><span>، تشغيله سهل.</span></p><p><span>على </span><strong><code>Linux</code></strong><span> أو </span><strong><code>macOS</code></strong><span>، شغل </span><code>Keycloak</code><span> بالأوامر دي:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 17.0234px; left: 7.6302px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ export</span> <span class="cm-def">KEYCLOAK_ADMIN</span><span class="cm-operator">=</span>admin</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ export</span> <span class="cm-def">KEYCLOAK_ADMIN_PASSWORD</span><span class="cm-operator">=</span>admin</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ cd</span> <span class="cm-def">$KC_HOME</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ bin</span>/kc.sh start-dev</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><span>أو على </span><strong><code>Windows</code></strong><span>، نفذ الأوامر دي:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="cmd"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cmd"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 17.0234px; left: 7.6302px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-builtin">set</span> <span class="cm-identifier">KEYCLOAK_ADMIN</span><span class="cm-operator">=</span><span class="cm-identifier">admin</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-builtin">set</span> <span class="cm-identifier">KEYCLOAK_ADMIN_PASSWORD</span><span class="cm-operator">=</span><span class="cm-identifier">admin</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-builtin">cd</span> <span class="cm-operator">%</span><span class="cm-identifier">KC_HOME</span><span class="cm-operator">%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-identifier">bin</span><span class="cm-error">\</span><span class="cm-identifier">kc</span><span class="cm-punctuation">.</span><span class="cm-identifier">bat</span> <span class="cm-identifier">start-dev</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><p><strong><span>ملحوظة:</span></strong><span> بما إن </span><code>Keycloak</code><span> مش بييجي معاه حساب </span><code>admin</code><span> افتراضي، احنا بنستخدم متغيرات  </span><code>KEYCLOAK_ADMIN</code><span> و </span><code>KEYCLOAK_ADMIN_PASSWORD</code><span> عشان نعمل حساب </span><code>admin</code><span> مبدئي بسهولة.</span></p><p><span>بعد كام ثانية، عشان تتأكد إن </span><code>Keycloak</code><span> اشتغل، افتح اللينك ده </span><strong><a href='http://localhost:8080/admin' target='_blank' class='url'>http://localhost:8080/admin</a></strong><span> واعمل </span><code>login</code><span> باليوزرنيم </span><strong><span>admin</span></strong><span> والباسورد </span><strong><span>admin</span></strong><span>.</span></p><p><span>ألف مبروك تاني! كده </span><code>Keycloak</code><span> شغال على جهازك وتقدر تبدأ تجربته بأنك تستكشف الـ </span><code>admin console</code><span> والـ </span><code>account console</code><span>.</span></p><hr /><hr /><p>&nbsp;</p><h3 id='قهم-الـ-admin-والـ-account-consoles'><strong><span>قهم الـ </span><code>admin</code><span> والـ </span><code>account consoles</code></strong></h3><p><span>في الجزء ده، هنبص بصة على الـ </span><code>admin console</code><span> والـ </span><code>account console</code><span>.</span></p><ul><li><p><span>الـ </span><strong><code>admin console</code></strong><span>: دي لوحة التحكم الشاملة اللي بتخليك تظبط وتدير كل حاجة في </span><code>Keycloak</code><span>.</span></p></li><li><p><span>الـ </span><strong><code>account console</code></strong><span>: دي بقى معمولة عشان المستخدمين النهائيين بتوع تطبيقاتك يقدروا يديروا حساباتهم بنفسهم.</span></p></li></ul><h4 id='يلا-نبدأ-مع-الـ-keycloak-admin-console'><strong><span>يلا نبدأ مع الـ </span><code>Keycloak admin console</code></strong></h4><p><span>هنا هتتعلم إزاي تعمل </span><code>login</code><span> على الـ </span><code>admin console</code><span> وتظبط الإعدادات الأساسية اللي هتحتاجها عشان تأمن أول تطبيق ليك.</span></p><p><span>الـ </span><code>admin console</code><span> بتوفر gui قوية وسهلة للـ </span><code>administrators</code><span> والمطورين عشان يديروا </span><code>Keycloak</code><span>.</span></p><p><span>عشان توصلها، افتح اللينك ده في المتصفح: </span><strong><a href='http://localhost:8080/admin' target='_blank' class='url'>http://localhost:8080/admin</a></strong><span>. هيحولك على صفحة الـ </span><code>login</code><span> بتاعة </span><code>Keycloak</code><span>، وهناك هتدخل اليوزرنيم والباسورد بتوع الـ </span><code>admin</code><span> اللي عملناهم في الخطوة اللي فاتت.</span></p><p><span>أول ما تعمل </span><code>login</code><span>، هتشوف قدامك الإعدادات الخاصة بالـ </span><strong><code>master realm</code></strong><span> جوه </span><code>Keycloak</code><span>، زي ما في الصورة الجاية.</span></p><p>&nbsp;</p><p><img src="imgs/image-20250628144202210.png" referrerpolicy="no-referrer" alt="image-20250628144202210"></p><p>&nbsp;</p><p><span>إنت هتتعلم تفاصيل أكتر بكتير عن الـ </span><code>admin console</code><span> دي وإحنا ماشيين في الكتاب، بس دلوقتي خلينا نمشي على كام خطوة بسيطة عشان نجهز </span><code>Keycloak</code><span> بتاعنا إنه يبدأ يأمن التطبيقات.</span></p><h3 id='إنشاء-وتظبيط-الـ-realm'><strong><span>إنشاء وتظبيط الـ </span><code>realm</code></strong></h3><p><span>أول حاجة هتحتاج تعملها هي إنك تنشئ </span><code>realm</code><span>  للتطبيقات والمستخدمين بتوعك. فكر في الـ </span><code>realm</code><span> ده كأنه </span><code>tenant</code><span> . كل </span><code>realm</code><span> بيكون </span><strong><span>معزول تماماً</span></strong><span> عن الـ </span><code>realms</code><span> التانية؛ ليه الإعدادات بتاعته، ومجموعة التطبيقات بتاعته، والمستخدمين بتوعه.</span></p><p><span>الميزة دي بتخلي تسطيبة واحدة بس من </span><code>Keycloak</code><span> تقدر تخدم على أغراض كتير مختلفة. كمثال، ممكن تعمل </span><code>realm</code><span> للتطبيقات الداخلية والموظفين، وتعمل </span><code>realm</code><span> تاني خالص للتطبيقات الخارجية والعملاء.</span></p><p><span>عشان تعمل </span><code>realm</code><span> جديد، دوس على علامة القايمة اللي في الركن الشمالي فوق (على شمال لوجو </span><code>Keycloak</code><span>) عشان تفتح القايمة. بعدها، دوس على المكان اللي بتختار منه الـ </span><code>realm</code><span> عشان تظهرلك قايمة بالـ </span><code>realms</code><span> الموجودة، وهتلاقي معاهم زرار عشان تعمل </span><code>realm</code><span> جديد. دوس على زرار </span><strong><span>Create Realm</span></strong><span>:</span></p><p><img src="imgs/image-20250628144443587.png" referrerpolicy="no-referrer" alt="image-20250628144443587"></p><p>&nbsp;</p><p><img src="imgs/image-20250628144647495.png" referrerpolicy="no-referrer" alt="image-20250628144647495"></p><p><img src="imgs/image-20250628144914436.png" referrerpolicy="no-referrer" alt="image-20250628144914436"></p><p><span>في الصفحة اللي بعدها، دخل اسم للـ </span><code>realm</code><span>. وعشان الاسم ده بيستخدم في اللينكات (URLs)، يفضل إنه ميكونش فيه أي special characters محتاجة تتظبط في اللينكات (زي المسافات). بعد ما تعمله، تقدر تحطله اسم تاني سهل للقراءة (</span><code>display name</code><span>). كمثال، استخدم </span><code>myrealm</code><span> للاسم ، و </span><code>My Realm</code><span> للاسم اللي هيظهر للناس</span></p><p><img src="imgs/image-20250628145027164.png" referrerpolicy="no-referrer" alt="image-20250628145027164"><span> </span></p><h3 id='عمل-يوزر-جديد-creating-a-user'><strong><span>عمل يوزر جديد (Creating a user)</span></strong></h3><p><span>بعد ما عملت الـ </span><code>realm</code><span>، يلا بينا نعمل أول </span><code>user</code><span> (مستخدم) جوه الـ </span><code>realm</code><span> ده:</span></p><ol start='' ><li><p><span>من القايمة اللي على الشمال، دوس على </span><code>Users</code><span>، وبعدها دوس على زرار </span><code>Create new user</code><span>.</span></p></li><li><p><span>دخل </span><code>username</code><span> سهل تفتكره، ودخل كمان أي قيمة إنت عايزها للـ </span><code>email</code><span> والـ </span><code>first name</code><span>والـ </span><code>last name</code><span> .</span></p></li><li><p><span>اختيار </span><code>Email Verified</code><span> ده الـ </span><code>administrator</code><span> ممكن يعلم عليه لو هو متأكد إن الإيميل ده هو الإيميل الصح بتاع اليوزر.</span></p></li><li><p><span>خاصية </span><code>Required User Actions</code><span> بتخلي الـ </span><code>administrator</code><span> يجبر اليوزر إنه يعمل شوية حاجات أول ما يعمل </span><code>login</code><span> المرة الجاية؛ مثلاً، يخليه يراجع بياناته (</span><code>review their profile</code><span>)، أو يتأكد من الإيميل بتاعه (</span><code>verify their email address</code><span>).</span></p></li><li><p><span>ماتنساش تدوس على </span><code>Create</code><span> بعد ما تخلص الفورم (الاستمارة):</span></p></li></ol><p>&nbsp;</p><p><img src="imgs/image-20250628145156552.png" referrerpolicy="no-referrer" alt="image-20250628145156552"></p><p><img src="imgs/image-20250628145233672.png" referrerpolicy="no-referrer" alt="image-20250628145233672"></p><p>&nbsp;</p><p><span>اليوزر ليه شوية بيانات أساسية جاهزة، زي </span><code>First name</code><span>، بس ممكن كمان تضيف أي خصائص تانية إنت عايزها (</span><code>custom attributes</code><span>) من خلال التاب اللي اسمه </span><code>Attributes</code><span>.</span></p><p><span>قبل ما اليوزر ده يقدر يعمل </span><code>login</code><span>، لازم تعمله باسورد مبدئي ومؤقت. عشان تعمل كده، دوس على التاب اللي اسمه </span><code>Credentials</code><span>. جوه التاب ده، دوس على زرار </span><code>Set Password</code><span> وامشي مع التعليمات عشان تحط باسورد جديد لليوزر.</span></p><p><img src="imgs/image-20250628145543445.png" referrerpolicy="no-referrer" alt="image-20250628145543445"></p><p><span>لو اختيار </span><code>Temporary</code><span> ده متفعل، اليوزر هيكون لازم يغير الباسورد بتاعه أول ما يعمل </span><code>login</code><span>. وده منطقي جداً في الحالات اللي الـ </span><code>administrator</code><span> هو اللي بيعمل فيها حساب اليوزر.</span></p><p><img src="imgs/image-20250628145611975.png" referrerpolicy="no-referrer" alt="image-20250628145611975"></p><h3 id='عمل-group'><strong><span>عمل </span><code>group</code><span> </span></strong></h3><p><span>بعد كده، يلا نعمل </span><code>group</code><span> ( ونضيف فيها اليوزر اللي لسه عاملينه. من القايمة اللي على الشمال، دوس على </span><code>Groups</code><span>، وبعدها دوس على زرار </span><code>Create group</code><span>.</span></p><p><img src="imgs/image-20250628145645413.png" referrerpolicy="no-referrer" alt="image-20250628145645413"></p><p><span>دخل اسم للـ </span><code>group</code><span>، مثلاً </span><code>mygroup</code><span>، وبعدين دوس </span><code>Create</code><span>.</span></p><p><span>بعد ما تعمل الـ </span><code>group</code><span>، هتشوفها في قايمة الـ </span><code>groups</code><span>. لو دوست عليها، هتقدر تعدل إعداداتها.</span>
<span>كمثال، تقدر تضيف </span><code>attributes</code><span> للـ </span><code>group</code><span> نفسه. أي </span><code>user</code><span> بينضم للـ </span><code>group</code><span> ده </span><strong><span>بيورث</span></strong><span> كل الـ </span><code>attributes</code><span> دي تلقائي. دي حاجة مفيدة جداً لو عندك مثلاً </span><code>group</code><span> لكل موظفين فرع معين، وعايز تضيف عنوان الفرع ده لكل الموظفين اللي في الـ </span><code>group</code><span> مرة واحدة.</span></p><p><span>ممكن كمان تدي </span><code>roles</code><span> (صلاحيات) للـ </span><code>group</code><span>، وبرضه كل أعضاء الـ </span><code>group</code><span> بيورثوها.</span></p><p><img src="imgs/image-20250628145817949.png" referrerpolicy="no-referrer" alt="image-20250628145817949"></p><p><span>عشان تضيف اليوزر للـ </span><code>group</code><span>، ارجع لصفحة </span><code>Users</code><span> واختار اليوزر اللي عملته. بعدها، دوس على تاب </span><code>Groups</code><span>. جوه التاب ده، دوس </span><code>Join Group</code><span>، واختار الـ </span><code>group</code><span> اللي لسه عاملينه، ودوس </span><code>Join</code><span> عشان تضيف اليوزر.</span></p><div class="md-alert md-alert-tip tip"><p><span class='md-alert-text md-alert-text-tip'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</span><br></p><p><span>معدش لازم تروح صفحة users وتضيفه للجروب لا عادي من members </span></p></div><p>&nbsp;</p><h3 id='عمل-global-role'><strong><span>عمل </span><code>global role</code><span> </span></strong></h3><p><span>عشان تعمل </span><code>global role</code><span> (صلاحية عامة على مستوى الـ </span><code>realm</code><span> كله)، دوس على </span><code>Realm roles</code><span> من القايمة اللي على الشمال، وبعدها دوس </span><code>Create role</code><span>. دخل اسم للـ </span><code>role</code><span>، مثلاً </span><code>myrole</code><span>. ممكن كمان تضيف وصف للـ </span><code>role</code><span>، وده بيبقى مفيد خصوصاً لو فيه </span><code>administrators</code><span> تانيين معاك.</span></p><p><span>أي </span><code>role</code><span> في </span><code>Keycloak</code><span> ممكن تحوله لـ </span><strong><code>composite role</code></strong><span> . دي بتسمح لك تضيف </span><code>roles</code><span> تانية جواها. أي </span><code>user</code><span> بياخد الـ </span><code>composite role</code><span> ده، هو كأنه أخد كل الـ </span><code>roles</code><span> اللي جواها بشكل تلقائي. الـ </span><code>composite roles</code><span> ممكن كمان تحتوي على </span><code>composite roles</code><span> تانية جواها. الميزة دي قوية جداً، بس في نفس الوقت لازم تستخدمها بحذر. إدارة الـ </span><code>composite roles</code><span> ممكن تكون صعبة شوية، وممكن كمان تأثر على الأداء (</span><code>performance</code><span>) لو استخدمتها زيادة عن اللزوم، خصوصاً لو عملت طبقات كتير من الـ </span><code>composite roles</code><span> جوه بعض.</span></p><div class="md-alert md-alert-note note"><p><span class='md-alert-text md-alert-text-note'><svg viewBox="0 0 16 16" version="1.1" width="1em" height="1em" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</span><br></p><p><span>ببساطة شديدة، الـ composite role هو عبارة عن </span><strong><span>&quot;باكدج&quot; أو &quot;حاوية&quot;</span></strong><span> لمجموعة roles تانية. إنت بتعمل role عادي خالص، لكن بدل ما يكون له معنى في حد ذاته، بتستخدمه عشان يجمع عدد من الـ roles التانية تحته. لما تيجي تدي الـ user هذا الـ composite role، هو بشكل تلقائي بيورث كل الـ roles اللي إنت حطيتها جواه.</span></p><hr /></div><p><img src="imgs/image-20250628150025437.png" referrerpolicy="no-referrer" alt="image-20250628150025437"></p><p><img src="imgs/image-20250628150055699.png" referrerpolicy="no-referrer" alt="image-20250628150055699"></p><p>&nbsp;</p><p><img src="imgs/image-20250628150123320.png" referrerpolicy="no-referrer" alt="image-20250628150123320"></p><p><span>عشان تضيف اليوزر للـ </span><code>role</code><span>، ارجع لصفحة </span><code>Users</code><span> واختار اليوزر اللي عملته. بعدها، دوس على تاب </span><code>Role mapping</code><span>. جوه التاب ده، دوس </span><code>Assign role</code><span>، واختار الـ </span><code>role</code><span> اللي لسه عاملينه، ودوس </span><code>Assign</code><span> عشان تضيف اليوزر للـ </span><code>role</code><span>.</span></p><p><img src="imgs/image-20250628150228152.png" referrerpolicy="no-referrer" alt="image-20250628150228152"></p><p><span>إنت دلوقتي خلصت كل الإعدادات المبدئية المطلوبة عشان تبدأ تأمن أول تطبيق ليك، بس الأول خلينا نبص بصة على الـ </span><code>Keycloak account console</code><span>، اللي بتخلي المستخدمين يديروا حساباتهم بنفسهم.</span></p><h3 id='يلا-نبدأ-مع-الـ-keycloak-account-console'><strong><span>يلا نبدأ مع الـ </span><code>Keycloak account console</code></strong></h3><p><span>الـ </span><code>account console</code><span> دي بتوفر واجهة للمستخدمين يقدروا يديروا بيها حساباتهم بنفسهم، زي مثلاً:</span></p><ul><li><p><span>يحدثوا بياناتهم الشخصية (</span><code>user profile</code><span>).</span></p></li><li><p><span>يغيروا الباسورد بتاعهم.</span></p></li><li><p><span>يفعلوا  (</span><code>second-factor authentication</code><span>).</span></p></li><li><p><span>يشوفوا التطبيقات، ومين التطبيقات اللي عملوا </span><code>login</code><span> عليها.</span></p></li><li><p><span>يشوفوا الـ </span><code>sessions</code><span> المفتوحة، ويقدروا يعملوا </span><code>sign out</code><span> من أي جهاز تاني عن بعد.</span></p></li></ul><p><span>عشان توصل للـ </span><code>account console</code><span>، افتح اللينك ده في المتصفح:</span>
<strong><a href='http://localhost:8080/realms/myrealm/account' target='_blank' class='url'>http://localhost:8080/realms/myrealm/account</a></strong><span> (لو استخدمت اسم </span><code>realm</code><span> مختلف، غير كلمة </span><code>myrealm</code><span> بالاسم اللي إنت عملته). هيتم تحويلك لصفحة الـ </span><code>login</code><span> بتاعة </span><code>Keycloak</code><span>، وهناك هتعمل </span><code>login</code><span> باليوزرنيم والباسورد اللي عملتهم لليوزر بتاعك في الخطوة اللي فاتت:</span></p><p><span>انا </span></p><p><img src="imgs/image-20250628153359023.png" referrerpolicy="no-referrer" alt="image-20250628153359023"></p><p><img src="imgs/image-20250628153443551.png" referrerpolicy="no-referrer" alt="image-20250628153443551"></p><p><img src="imgs/image-20250628153505326.png" referrerpolicy="no-referrer" alt="image-20250628153505326"></p><p>&nbsp;</p><p><strong><span>ملحوظة:</span></strong><span> ممكن كمان تلاقي اللينك بتاع الـ </span><code>account console</code><span> من جوه الـ </span><code>admin console</code><span> نفسها.</span>
<span>في الـ </span><code>admin console</code><span>، دوس على </span><code>Clients</code><span>، وهناك هتلاقي اللينك بتاع الـ </span><code>account console</code><span> جنب الـ </span><code>client</code><span> اللي اسمه </span><code>account</code><span>.</span></p><p><span>إنت دلوقتي عرفت إن </span><code>Keycloak</code><span> مش بس بيديك </span><code>admin console</code><span> قوية وشاملة، لأ ده كمان بيديك </span><code>console</code><span> تانية للمستخدمين عشان يديروا بيها حساباتهم بنفسهم.</span></p><figure class='table-figure'><table><thead><tr><th style='text-align:left;' ><span>وجه المقارنة</span></th><th style='text-align:left;' ><code>Admin Console</code></th><th style='text-align:left;' ><code>Account Console</code></th></tr></thead><tbody><tr><td style='text-align:left;' ><strong><span>مين بيستخدمها؟</span></strong></td><td style='text-align:left;' ><span>المدير (Administrator) أو المطور (Developer)</span></td><td style='text-align:left;' ><span> (End-User)</span></td></tr><tr><td style='text-align:left;' ><strong><span>وظيفتها إيه؟</span></strong></td><td style='text-align:left;' ><span>إدارة وتظبيط نظام </span><code>Keycloak</code><span> بالكامل</span></td><td style='text-align:left;' ><span>إدارة الحساب الشخصي للمستخدم</span></td></tr><tr><td style='text-align:left;' ><strong><span>بتتحكم في إيه؟</span></strong></td><td style='text-align:left;' ><span>كل الـ Realms، المستخدمين، التطبيقات، الصلاحيات</span></td><td style='text-align:left;' ><span>بيانات المستخدم الشخصية، باسورد، وأمان حسابه هو بس</span></td></tr><tr><td style='text-align:left;' ><strong><span>إزاي توصلها؟</span></strong></td><td style='text-align:left;' ><code>http://localhost:8080/admin</code></td><td style='text-align:left;' ><code>http://localhost:8080/realms/&lt;realm name&gt;/account</code></td></tr></tbody></table></figure><p>&nbsp;</p></div></div>
</body>
</html>